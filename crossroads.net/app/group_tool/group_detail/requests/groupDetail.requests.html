<preloader full-screen='false' ng-if="!groupDetailRequests.ready"> </preloader>

<div ng-if='groupDetailRequests.listView() && groupDetailRequests.ready'>
  <div class="table-responsive">
    <table class="table group-requests-list">
      <thead>
        <th class='col-md-1'></th>
        <th class='col-md-2'>Name</th>
        <th class='col-md-2'>Request</th>
        <th class='col-md-2'>Email Address</th>
        <th class='col-md-2'>Request Date</th>
        <th class='col-md-3'></th>
      </thead>
      <tbody>
        <tr ng-repeat='inquiry in groupDetailRequests.inquired track by $index'>
          <td>
            <img class='img-responsive imgix-fluid requestor-image' ng-src='{{inquiry.imageUrl}}' err-src='{{inquiry.defaultProfileImageUrl}}'>
          </td>
          <td>
            {{inquiry.recipientName()}}
          </td>
          <td>
            Requested to Join
          </td>
          <td>
            {{inquiry.emailAddress}}
          </td>
          <td>
            {{inquiry.requestDate | date: 'MM/dd/yyyy'}}
          </td>
          <td>
            <button type='button' class='btn btn-primary' ng-click="groupDetailRequests.approve(inquiry)">Approve</button>
            <button type='button' class='btn btn-primary' ng-click="groupDetailRequests.deny(inquiry)">Deny</button>
          </td>
        </tr>
        <tr ng-repeat='invite in groupDetailRequests.invited track by $index'>
          <td>
            <img class='img-responsive imgix-fluid requestor-image' ng-src='{{invite.imageUrl}}'>
          </td>
          <td>
            {{invite.recipientName}}
          </td>
          <td>
            Invite Sent
          </td>
          <td>
            {{invite.emailAddress}}
          </td>
          <td>
            {{invite.requestDate | date: 'MM/dd/yyyy'}}
          </td>
          <td>
            &nbsp;
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class='row'>&nbsp;</div>
  <div class='container-fluid'>
    <div class='row'>
      <div class='col-sm-12'>
        <p class='text-center'><button type='button' class='btn btn-primary' ng-click="groupDetailRequests.setView('Invite', false)">Invite Someone</button></p>
      </div>
    </div>
  </div>
</div>
<!--
This will be Done Later not executing these flows as part of this story.


<div class='container-fluid' ng-if='groupDetailRequests.currentView === "Approve"'>
  <form>
    <div class='row'>
      <div class='col-md-6 col-md-offset-3'>

        <div class='row'>
          <div class='col-md-12'>
            <h4>Approve Participant - {{groupDetailRequests.currentRequest.name}}</h4>
          </div>
        </div>

        <div class='row'>
          <div class='col-md-12'>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
            Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
          </div>
        </div>

        <div class='row'>&nbsp;</div>

        <div class='row'>
          <div class='col-md-12'>
            <div class='form-group'>
              <label for='emailMessage' class='wide-label'>Message</label>
              <textarea type='textarea' rows='8' class='form-control' name='emailMessage' ng-model='groupDetailRequests.currentRequest.message'></textarea>
            </div>
          </div>
        </div>
        <div class='row'>&nbsp;</div>

        <div class='row'>
          <div class='col-md-12'>
            <p class='text-center'>
              <a type='button' class='btn btn-primary' href='#' ng-click='groupDetailRequests.setView("List")'>Cancel</a>
              <a type='button' class='btn btn-primary' href='#' ng-click='groupDetailRequests.approveRequest(groupDetailRequests.currentRequest)'>Send</a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>

<div class='container-fluid' ng-if='groupDetailRequests.currentView === "Deny"'>
  <form>
    <div class='row'>
      <div class='col-md-6 col-md-offset-3'>

        <div class='row'>
          <div class='col-md-12'>
            <h4>Deny Participant - {{groupDetailRequests.currentRequest.name}}</h4>
          </div>
        </div>

        <div class='row'>
          <div class='col-md-12'>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
            Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
          </div>
        </div>

        <div class='row'>&nbsp;</div>

        <div class='row'>
          <div class='col-md-12'>
            <div class='form-group'>
              <label for='emailMessage' class='wide-label'>Message</label>
              <textarea type='textarea' rows='8' class='form-control' name='emailMessage' ng-model='groupDetailRequests.currentRequest.message'></textarea>
            </div>
          </div>
        </div>

        <div class='row'>&nbsp;</div>

        <div class='row'>
          <div class='col-md-12'>
            <p class='text-center'>
              <a type='button' class='btn btn-primary' href='#' ng-click='groupDetailRequests.setView("List")'>Cancel</a>
              <a type='button' class='btn btn-primary' href='#' ng-click='groupDetailRequests.denyRequest(groupDetailRequests.currentRequest)'>Send</a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
-->

    bindings: {
      person: '<',
      normalLoadingText: '@',
      loadingLoadingText: '@',
      cancel: '&',
      submit: '&',
      header: '@',
      subHeaderText: '<',
      contactText: '<',
      emailTemplateText: '<',
    },

<div class='container-fluid' ng-if='groupDetailRequests.approveView()'>
  <message></message>
</div>
<div class='container-fluid' ng-if='groupDetailRequests.denyView()'>
  <message></message>
</div>
<div class='container-fluid' ng-if='groupDetailRequests.inviteView()'>
  <group-detail-invite on-update="groupDetailRequests.setView(newView, refresh)" group-id="groupDetailRequests.groupId"></group-detail-invite>
</div>
