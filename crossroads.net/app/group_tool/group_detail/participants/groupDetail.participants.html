<preloader full-screen='false' ng-show='!groupDetailParticipants.ready'> </preloader>

<!-- List or Edit participants -->
<div class='container-fluid' 
  ng-show='groupDetailParticipants.ready'
  ng-if='groupDetailParticipants.isListView() || groupDetailParticipants.isEditView()'>
  <div class='row'>
    <div class='col-md-12 group-participants'>
      <group-detail-participant-card 
        ng-repeat='participant in groupDetailParticipants.data'
        delete-action='groupDetailParticipants.beginRemoveParticipant(participant)'
        participant='participant'
        edit='groupDetailParticipants.isEditView()'>
      </group-detail-participant-card>
    </div>
  </div>
  <div class='row'>&nbsp;</div>
  <div class='row'>
    <div class='col-md-12'>
      <p class='text-center' ng-if='groupDetailParticipants.isListView()'>
        <a type='button' class='btn btn-primary' href="mailto:?bcc={{groupDetailParticipants.emailList()}}" target="_top">Email Group</a>
        <a type='button' class='btn btn-primary' href='#' ng-click='groupDetailParticipants.setEditView()' ng-if='groupDetailParticipants.isLeader'>Edit</a>
      </p>
      <p class='text-center' ng-if='groupDetailParticipants.isEditView()'>
        <a type='button' class='btn btn-primary' href='#' ng-click='groupDetailParticipants.setListView()' ng-if='groupDetailParticipants.isLeader'>Cancel</a>
      </p>
    </div>
  </div>
</div>

<!-- Delete a participant -->
<div class='container-fluid' ng-if='groupDetailParticipants.isDeleteView() && groupDetailParticipants.isLeader'>
  <group-message person="groupDetailParticipants.deleteParticipant"
    normal-loading-text="Remove Participant"
    loading-loading-text="Removing..."
    header="Remove Participant - {{groupDetailParticipants.deleteParticipant.displayName()}}"
    sub-header-text="groupToolRemoveParticipantSubheaderText"
    contact-text="groupToolRemoveParticipantPleaseContactText"
    email-template-text="groupToolRemoveParticipantEmailTemplateText"
    cancel-action="groupDetailParticipants.cancelRemoveParticipant(person)"
    submit-action="groupDetailParticipants.removeParticipant(person)"
    processing="groupDetailParticipants.processing"
    ></group-message>
</div>

<!-- Email participants -->
<div class='container-fluid' ng-if='groupDetailParticipants.isEmailView()'>
  <message-participants
    message='groupDetailParticipants.groupMessage'
    cancel-action='groupDetailParticipants.cancelMessageParticipants(message)'
    submit-action='groupDetailParticipants.messageParticipants(message)'
    processing='groupDetailParticipants.processing'/>
  />
</div>
